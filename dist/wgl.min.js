var Wgl=function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return R}));class r{constructor(t,e,i,r=t.STATIC_DRAW){this.gl=t,this.id=t.createBuffer(),this.type=e,this.dataType=i.constructor,this.length=i.length,t.bindBuffer(e,this.id),t.bufferData(e,i,r)}bind(){this.gl.bindBuffer(this.type,this.id)}unbind(){this.gl.bindBuffer(this.type,null)}}class n extends r{constructor(t,e,i=t.STATIC_DRAW){super(t,t.ARRAY_BUFFER,e,i)}}class o extends r{constructor(t,e,i=t.STATIC_DRAW){super(t,t.ELEMENT_ARRAY_BUFFER,e,i)}}class s{constructor(t,e,i){this.id=t.createShader(e),t.shaderSource(this.id,i),t.compileShader(this.id),t.getShaderParameter(this.id,t.COMPILE_STATUS)||console.error("ERROR compiling shader!",t.getShaderInfoLog(this.id))}}class a extends s{constructor(t,e){super(t,t.VERTEX_SHADER,e)}}class l extends s{constructor(t,e){super(t,t.FRAGMENT_SHADER,e)}}var u=class{constructor(t,e={}){Object.assign(this,e),this.gl=t,this.id=t.createFramebuffer()}bind(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.id)}unbind(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}attach(t,e,i=0){this.bind(),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,t,this.gl.TEXTURE_2D,e.id||e,i),this.unbind()}};const h=(t,e)=>({[t.FLOAT_VEC2]:{size:2,type:t.FLOAT},[t.FLOAT_VEC3]:{size:3,type:t.FLOAT},[t.FLOAT_VEC4]:{size:4,type:t.FLOAT}}[e]);function f(){const{id:t,gl:e}=this,i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;++r){const i=e.getActiveAttrib(t,r),n=e.getAttribLocation(t,i.name),{size:o,type:s}=h(e,i.type);this[i.name]=(t,i=0,r=0)=>{const{BYTES_PER_ELEMENT:a}=t.dataType;e.enableVertexAttribArray(n),e.bindBuffer(e.ARRAY_BUFFER,t.id||t),e.vertexAttribPointer(n,o,s,!1,i*a,r*a)}}}const E=(t,e,i)=>({[t.BOOL]:i=>t.uniform1i(e,i),[t.BOOL_VEC2]:i=>t.uniform2iv(e,i),[t.BOOL_VEC3]:i=>t.uniform3iv(e,i),[t.BOOL_VEC4]:i=>t.uniform4iv(e,i),[t.FLOAT]:i=>t.uniform1f(e,i),[t.FLOAT_MAT2]:i=>t.uniformMatrix2fv(e,!1,i),[t.FLOAT_MAT2x3]:i=>t.uniformMatrix2x3fv(e,!1,i),[t.FLOAT_MAT2x4]:i=>t.uniformMatrix2x4fv(e,!1,i),[t.FLOAT_MAT3]:i=>t.uniformMatrix3fv(e,!1,i),[t.FLOAT_MAT3x2]:i=>t.uniformMatrix3x2fv(e,!1,i),[t.FLOAT_MAT3x4]:i=>t.uniformMatrix3x4fv(e,!1,i),[t.FLOAT_MAT4]:i=>t.uniformMatrix4fv(e,!1,i),[t.FLOAT_MAT4x2]:i=>t.uniformMatrix4x2fv(e,!1,i),[t.FLOAT_MAT4x3]:i=>t.uniformMatrix4x3fv(e,!1,i),[t.FLOAT_VEC2]:i=>t.uniform2fv(e,i),[t.FLOAT_VEC3]:i=>t.uniform3fv(e,i),[t.FLOAT_VEC4]:i=>t.uniform4fv(e,i),[t.INT]:i=>t.uniform1i(e,i),[t.INT_SAMPLER_2D]:i=>t.uniform1i(e,i),[t.INT_SAMPLER_2D_ARRAY]:t=>{throw"Not Implemented"},[t.INT_SAMPLER_3D]:i=>t.uniform1i(e,i),[t.INT_SAMPLER_CUBE]:i=>t.uniform1i(e,i),[t.INT_VEC2]:i=>t.uniform2iv(e,i),[t.INT_VEC3]:i=>t.uniform3iv(e,i),[t.INT_VEC4]:i=>t.uniform4iv(e,i),[t.SAMPLER_2D]:i=>t.uniform1i(e,i.slot||i),[t.SAMPLER_2D_ARRAY]:t=>{throw"Not Implemented"},[t.SAMPLER_2D_ARRAY_SHADOW]:i=>t.uniform1i(e,i),[t.SAMPLER_2D_SHADOW]:i=>t.uniform1i(e,i),[t.SAMPLER_3D]:i=>t.uniform1i(e,i),[t.SAMPLER_CUBE]:i=>t.uniform1i(e,i),[t.SAMPLER_CUBE_SHADOW]:i=>t.uniform1i(e,i),[t.UNSIGNED_INT]:i=>t.uniform1ui(e,i),[t.UNSIGNED_INT_SAMPLER_2D]:i=>t.uniform1i(e,i),[t.UNSIGNED_INT_SAMPLER_2D_ARRAY]:t=>{throw"Not Implemented"},[t.UNSIGNED_INT_SAMPLER_3D]:i=>t.uniform1i(e,i),[t.UNSIGNED_INT_SAMPLER_CUBE]:i=>t.uniform1i(e,i),[t.UNSIGNED_INT_VEC2]:i=>t.uniform2uiv(e,i),[t.UNSIGNED_INT_VEC3]:i=>t.uniform3uiv(e,i),[t.UNSIGNED_INT_VEC4]:i=>t.uniform4uiv(e,i)}[i]);function c(){const{id:t,gl:e}=this,i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const i=e.getActiveUniform(t,r),n=e.getUniformLocation(t,i.name);this[i.name]=E(e,n,i.type)}}class d{static create(t,e,i){const r=new a(t,e),n=new l(t,i);return new d(t,r,n)}constructor(t,...e){this.gl=t,this.id=t.createProgram(),this.locations=[],e.forEach(e=>t.attachShader(this.id,e.id)),t.linkProgram(this.id),t.getProgramParameter(this.id,t.LINK_STATUS)||console.error("ERROR linking program!",t.getProgramInfoLog(this.id)),t.validateProgram(this.id),t.getProgramParameter(this.id,t.VALIDATE_STATUS)||console.error("ERROR validating program!",t.getProgramInfoLog(this.id)),f.call(this),c.call(this)}getAttribLocation(t){return this.gl.getAttribLocation(this.id,t)}getUniformLocation(t){return this.gl.getUniformLocation(this.id,t)}set(...t){for(const e of t)for(name in e)try{this[name](e[name])}catch(t){}}use(t){return this.gl.useProgram(this.id),t&&this.set(t),this}}var g=d;const T=t=>({[t.LUMINANCE]:{format:t.LUMINANCE,type:t.UNSIGNED_BYTE},[t.ALPHA]:{format:t.ALPHA,type:t.UNSIGNED_BYTE},[t.R8]:{format:t.RED,type:t.UNSIGNED_BYTE},[t.RG16F]:{fromat:t.RGB,type:t.FLOAT},[t.RGB]:{format:t.RGB,type:t.UNSIGNED_BYTE},[t.RGBA]:{format:t.RGBA,type:t.UNSIGNED_BYTE},[t.RGB16F]:{format:t.RGB,type:t.FLOAT},[t.RGBA16F]:{format:t.RGBA,type:t.FLOAT}});var A=class{constructor(t,e,i={}){this.gl=t,this.id=t.createTexture(),this.slot=i.slot||this.gl.getSlot(),this.bind(this.slot),this.texImage2D(e,i),this.texParameteri(i)}bind(t){return t&&this.active(t),this.gl.bindTexture(this.gl.TEXTURE_2D,this.id),this}unbind(){return this.gl.bindTexture(this.gl.TEXTURE_2D,null),this}active(t=0){this.slot=t,this.gl.activeTexture(this.gl.TEXTURE0+t)}delete(){this.unbind(),this.gl.deleteTexture(this.id)}generateMipmap(){return this.gl.generateMipmap(this.gl.TEXTURE_2D),this}texImage2D(t,{internalFormat:e=this.gl.RGB,width:i,height:r}={}){const n=Array.isArray(t)?t:[t],o=T(this.gl)[e].format,s=T(this.gl)[e].type;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!0);for(let l=0,u=n.length;l<u;++l){const u=n[l]||null;this.gl instanceof WebGLRenderingContext&&!((a=t)&&a.buffer instanceof ArrayBuffer&&void 0!==a.byteLength)?this.gl.texImage2D(this.gl.TEXTURE_2D,l,e,o,s,u):this.gl.texImage2D(this.gl.TEXTURE_2D,l,e,u.width||i,u.height||r,0,o,s,u)}var a;return this}texParameteri({minFilter:t=this.gl.LINEAR,magFilter:e=this.gl.LINEAR,wrapS:i=this.gl.CLAMP_TO_EDGE,wrapT:r=this.gl.CLAMP_TO_EDGE}){return t&&this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,t),e&&this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,e),i&&this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,i),r&&this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,r),this}};var m=class{constructor(t,e){this.gl=t,this.id=t.createVertexArray(),t.bindVertexArray(this.id),"function"==typeof e&&e(this)}bind(){this.gl.bindVertexArray(this.id)}unbind(){this.gl.bindVertexArray(null)}};function _(t={}){const e=t.canvas||document.createElement("canvas"),i=e.getContext(t.contextType||"webgl2",t),r=Object.freeze({resize:new Set});let n=()=>{};function o(t){s(),n(t),o.requestId=requestAnimationFrame(o)}function s(){const t=e.clientWidth,n=e.clientHeight;e.width===t&&e.height===n||(e.width=t,e.height=n,i.viewport(0,0,t,n),r.resize.forEach(e=>e({width:t,height:n})))}i.loop=t=>n=t,i.addEventListener=(t,e)=>{r[t].add(e)},i.render=t=>{t&&(n=t),s(),n()},i.run=t=>{t&&(n=t),requestAnimationFrame(o)},i.removeEventListener=(t,e)=>{r[t].add(e)};const a=[0,1,2,3,4,5,6,7,8];return i.getSlot=()=>a.shift(),Object.defineProperty(i,"renderCall",{set:function(t){n=t}}),i}function R(){const t=_(...arguments);return t.ArrayBuffer=n.bind(null,t),t.ElementArrayBuffer=o.bind(null,t),t.VertexShader=a.bind(null,t),t.FragmentShader=l.bind(null,t),t.Program=g.bind(null,t),t.VertexArray=m.bind(null,t),t.Texture2D=A.bind(null,t),t.Framebuffer=u.bind(null,t),t.Program.create=g.create.bind(null,t),t}}]).default;